
# 存储器的层次结构

第一节 **4.1.1 存储器的层次结构**（课件 P4-P11）主要解决了一个核心矛盾：**CPU 太快，而存储器太慢**。

为了解决这个问题，现代计算机设计了精巧的“三级层次结构”。以下是这一节的核心考点梳理：

### 1. 核心矛盾：冯·诺依曼瓶颈 (The Bottleneck)

- **理想的存储器**：我们要它 **容量大、速度快、价格低**。但现实中，速度快的容量小且贵，便宜的容量大但慢。
    
- **现实的矛盾**：
    
    - CPU 执行指令的速度极快。
        
    - 存储器提供指令的速度跟不上。
        
    - 这就是著名的**“瓶颈”问题**。
        
- **数据实证**（课件 P6 例子）：
    
    - CPU 主频 2GHz $\rightarrow$ 处理一次仅需 **0.5 ns**。
        
    - 访存时间 $\rightarrow$ 需要 **5 ns**。
        
    - **结论**：两者速度相差一个数量级，CPU 大部分时间都在“等”数据。
        

### 2. 解决方案：三级存储层次 (The 3-Level Hierarchy)

为了平衡速度、容量和价格，计算机采用了 **“Cache — 主存 — 外存”** 的分层结构 5。

#### **① 高速缓冲存储器 (Cache)**

- **定位**：**速度匹配层**。
    
- **作用**：存放主存中**最近经常使用**的程序和数据副本。
    
- **特点**：速度极快（接近 CPU），容量很小，成本高。
    

#### **② 主存储器 (Main Memory)**

- **定位**：**核心工作区**。
    
- **作用**：CPU **直接编程访问**的地方，存放当前正在执行的程序和数据。
    
- **要求**：必须支持 **随机访问 (Random Access)**，即访问任何一个单元的时间都相同。
    

#### **③ 外存储器 (External Storage)**

- **定位**：**容量后援层**。
    
- **作用**：存放暂时不用的海量数据（如硬盘、光盘）。
    
- **特点**：容量巨大，速度慢，价格低。**注意：外存的信息必须调入主存才能被 CPU 运行**。
    

---

### 3. 两个关键的层次接口 (Two Key Interfaces)

在这个三级结构中，形成了两个逻辑层次，分别解决不同的问题：

#### **A. 主存 — Cache 层次**

- **目标**：解决 **速度** 问题。
    
- **核心技术**：
    
    - **地址映射**：主存的块怎么放进 Cache？(直接映射、全相联、组相联)。
        
    - **替换算法**：Cache 满了扔谁？
        
    - **一致性**：Cache 改了，主存怎么改？
        

#### **B. 主存 — 外存 层次 (虚拟存储器)**

- **目标**：解决 **容量** 问题（让程序员感觉内存无限大） 11。
    
- **核心技术**：
    
    - **虚-实地址转换**：逻辑地址怎么变成物理地址？
        
    - **页面调度**：内存不够了，把谁换到硬盘上去？
        

### 🧠 总结

这一节的核心逻辑就是：**用少量的钱（Cache）买速度，用大量的钱（外存）买容量，中间用主存来协调。**


# 二、存储器的分类

虽然现在我们习以为常的是“内存条”和“固态硬盘”，但在计算机发展史上，存储器的种类非常丰富。课件主要按**存储介质**将它们分为四大类：

### 1. 半导体存储器 (Semiconductor Memory) —— **⭐ 核心重点**

这是现代计算机**主存（内存）**和**高速缓存（Cache）**的主力军。

- **基本原理**：利用半导体器件（如 MOS 管）的开关特性来存储信息 。
    
- **两大工艺流派**（课件 P13）：
    ![[Pasted image 20251229173034.png]]
    - **双极型 (Bipolar)**：如 TTL、ECL。
        
        - _特点_：**速度极快**，但功耗大、集成度低（存不了多少东西）。
            
        - _用途_：早期的高速缓存 (Cache) 或高性能 CPU 内部寄存器 。
            
    - **MOS 型**：如 CMOS。
        
        - _特点_：**集成度高**（容量大）、功耗低，速度也较快。
            
        - _用途_：现代主存和绝大多数 Cache 。
            
- 最重要的分类 (SRAM vs DRAM) —— 必考对比
    
    这两种都属于 MOS 型，但原理截然不同（课件 P14）：
    
    - **静态存储器 (SRAM)**：
        
        - _原理_：靠**双稳态触发器**（锁存器）来“锁住”信息。只要不断电，数据就一直稳稳地在那 。
            
        - _特点_：速度最快，但体积大（一个比特要 6 个管子）。
            
        - _用途_：**Cache**。
            
    - **动态存储器 (DRAM)**：
        
        - _原理_：靠**电容**上的电荷来存信息。电荷会漏掉，所以需要不断“刷新”充电 。
            
        - _特点_：集成度最高（一个比特只要 1 个管子 + 1 个电容），便宜，但速度稍慢。
            
        - _用途_：**主存（内存条）**。
            

### 2. 磁表面存储器 (Magnetic Surface Memory)

这是**外存储器**（硬盘、磁带）的鼻祖和主力。

- **原理**：在塑料或金属基体上涂一层磁性材料，利用磁化区域的**不同磁化方向**（N/S 极）来表示 `0` 和 `1` 。
    
- **特点**：
    
    - **非破坏性读出**：读完了数据还在。
        
    - **非易失性**：断电后数据不丢失，可长期保存。
        
    - **容量大、速度慢**。
        
- **典型代表**：磁盘（硬盘）、磁带、磁卡 。
    

### 3. 光盘存储器 (Optical Disk Memory)

这是曾经风靡一时的多媒体存储介质。

- **原理**：利用激光束在盘面上烧出微小的“坑”，利用**光斑的有无/反射率**来表示信息 。
    
- **分类**（课件 P15）：
    
    - **CD-ROM**：只读型，出厂压制好，不能改 。
        
    - **WORM**：一次写入型，用户可以写一次，写完就变永久了 。
        
    - **可重写型**：可以反复擦写 。
        

### 4. 磁芯存储器 (Magnetic Core Memory) —— **考古知识**

- **地位**：上世纪 50-70 年代的主流，现在已被半导体淘汰。
    
- **原理**：用一个个微型的**磁环**（铁氧体）串在电线上，靠磁环的磁化方向存数 。
    
- _注：这就是为什么我们有时候还会把内存转储文件叫 "Core Dump"（磁芯转储），名字留下来了，但技术已经进博物馆了。_
    

---

### 🧠 总结与记忆

这一节的考点通常集中在 **SRAM 和 DRAM 的对比**，以及不同存储器用在什么层级：

| **存储器类型**     | **典型代表** | **速度** | **容量** | **易失性**     | **主要用途**  |
| ------------- | -------- | ------ | ------ | ----------- | --------- |
| **双极型/SRAM**  | Cache    | 极快     | 小      | **是** (断电丢) | **Cache** |
| **MOS型/DRAM** | 内存条      | 快      | 大      | **是** (断电丢) | **主存**    |
| **磁表面**       | 机械硬盘     | 慢      | 极大     | **否** (永久)  | **外存**    |
| **光存储**       | 光盘       | 慢      | 大      | **否** (永久)  | **外存/备份** |
|               |          |        |        |             |           |
|               |          |        |        |             |           |
|               |          |        |        |             |           |



# 三、存取方式

这四个缩写（RAM, ROM, SAM, DAM）在计算机领域非常基础且重要，请务必分清它们的本质区别。

---

### 1. 随机存取存储器 (RAM) —— **速度之王**

这是我们最熟悉的“内存”。

- **定义**：**Random Access Memory**。
    
- **核心特征**：
    
    1. **随机性**：CPU 可以按照地址随机地访问任何一个单元（比如直接跳去 `FFFFH`），不需要按顺序找。
        
    2. **等时性**：**这是最重要的特征**。访问存储器中任何一个位置所需的时间都是**相同**的，与数据所在的位置无关。
        
- **指标**：用 **存取周期 (R/W Cycle)** 来衡量速度。
    
- **应用**：主存、高速缓存 (Cache)。
    

### 2. 只读存储器 (ROM) —— **固化专家**

- **定义**：**Read Only Memory**。
    
- **核心特征**：在正常工作状态下只能读出数据，不能写入（或者很难写入）。
    
- **应用**：存放不需要改变的系统程序（如 BIOS）、汉字字库、微程序等。
    
- **家族演变**（课件 P18）：
    
    - **Mask ROM**：出厂固化，不可改。
        
    - **PROM**：用户可编程一次。
        
    - **EPROM**：紫外线擦除，可重写。
        
    - **EEPROM**：电擦除。
        
    - **Flash Memory**：闪存（U盘/SSD的基础），也就是现在的当红炸子鸡。
        

---

### 3. 顺序存取存储器 (SAM) —— **像“磁带”**

- **定义**：**Sequential Access Memory**。
    
- **核心特征**：
    
    - 数据是按顺序排列的。
        
    - **存取时间取决于数据的位置**。你想找最后的数据，必须先把前面的全部“卷”过去。
        
- **典型代表**：**磁带 (Magnetic Tape)**。
    
- **操作过程**：等待（卷带子） $\rightarrow$ 读/写。平均等待时间很长。
    

### 4. 直接存取存储器 (DAM) —— **像“黑胶唱片/硬盘”**

- **定义**：**Direct Access Memory**。
    
- **核心特征**：这是 RAM 和 SAM 的折中方案。
    
    1. **第一步（直接定位）**：读写磁头直接移动到大概的小区域（比如磁盘的某个磁道），这一步是“跳跃”的。
        
    2. **第二步（顺序查找）**：在那个小区域内，等待数据转过来（顺序查找）。
        
- **典型代表**：**磁盘 (Magnetic Disk)**。
    
- **操作过程**：**寻道** (Seek，定位) $\rightarrow$ **旋转** (Rotate，等待) $\rightarrow$ 读/写。
    

---

### ⚡ 一张表搞定考试对比

| **缩写**  | **全称** | **存取时间是否固定？** | **访问模式** | **典型代表** |
| ------- | ------ | ------------- | -------- | -------- |
| **RAM** | 随机存取   | **是 (固定)**    | 指哪打哪     | 内存条      |
| **ROM** | 只读存储   | **是 (固定)**    | 只读不写     | BIOS芯片   |
| **SAM** | 顺序存取   | **否 (变动)**    | 从头读到尾    | 磁带       |
| **DAM** | 直接存取   | **否 (变动)**    | 先跳跃后顺序   | 机械硬盘     |

复习提示：

考试中常问：“为什么 RAM 比 DAM 快？”

答：因为 RAM 是电子开关直接选通地址，时间是常数；而 DAM（硬盘）有机械动作（寻道和旋转），时间取决于物理位置。



