
# 01. 主机和外设的连接方式

### 1. 辐射式连接 (Radial / Star Connection) —— “一对一”

这是计算机早期的连接方式。

- **结构**：主机像章鱼一样，伸出多条独立的线路，每一条线专门连接一个外设（或其接口）1。
    
- **特点**：
    
    - **专线专用**：每台设备都有自己的一套控制线。
        
    - **不易扩展**：如果你想加一台新打印机，必须在主机上再焊一套专门的接口电路，还要改主机硬件，非常麻烦 2。
        
    - _比喻_：像老式电话交换机，每个人都要拉一根专线到总局。
        

### 2. 总线式连接 (Bus Connection) —— “共享大道”

这是现代计算机（包括微机）最主流的连接方式。

- **结构**：所有设备（CPU、内存、硬盘、显卡）都挂在一组**公共**的传输线（总线）上 3。
    
- **特点**：
    
    - **分时共享**：同一时刻只能有一对设备在通信，大家排队用。
        
    - **便于扩展**：想加新设备？只要往总线上“挂”一个接口卡就行，不需要改动主机内部结构 4。
        
    - _比喻_：像一条高速公路，所有车（数据）都走这条路，只需要修不同的出口（接口）即可。
        

### 3. 通道式连接 (Channel Connection) —— “大管家模式”

这是大型主机（Mainframe）常用的高性能方式。

- **结构**：主机不直接管外设，而是交给**通道 (Channel)** 去管。
    
    - **主机 $\rightarrow$ 通道 $\rightarrow$ I/O 设备** 5。
        
- **原理**：“通道”其实是一个简化的专用处理器。CPU 只要发个命令：“把这堆数据读进来”，然后就可以去忙别的了。通道负责具体的搬运工作，搬完了再通知 CPU。
    
- **特点**：**并行能力提高**。CPU 和 I/O 设备可以真正同时工作，互不干扰 6。
    

---

### 🧠 总结对比

| **连接方式** | **核心特征** | **优点**       | **缺点**    | **适用场景**      |
| -------- | -------- | ------------ | --------- | ------------- |
| **辐射式**  | 专线专用     | 控制简单         | 扩展极难，线多繁杂 | 早期计算机         |
| **总线式**  | **共享线路** | **易扩展，结构简单** | 存在总线瓶颈    | **现代微机 (PC)** |
| **通道式**  | 委托管理     | 效率高，CPU 负担小  | 硬件成本高     | 大型机/服务器       |

这一节最常考的就是**“总线式连接的优点是什么？”**（答案：便于扩展）。



# 02.总线

总线不仅仅是一束导线，它是一套**“交通规则”**。这一节的内容比较多，逻辑性很强，我为你将其拆解为 **定义与特性**、**分类**、**仲裁**、**标准** 四个核心模块来深入讲解。

---

### 1. 总线的定义与本质 (Definition & Essence)

- **定义**：总线是一组能为多个部件**分时共享**的信息传送线路，以及相应的控制逻辑 。
    
- **两大核心特征** ：
    
    1. **分时 (Time-division)**：同一时刻，总线上只能有一个部件发送信息（但可以有多个部件接收）。
        
    2. **共享 (Shared)**：这组线路是所有部件共用的，不是专用的。
        
- **物理实体**：不仅仅是线，还包括 CPU 内部的控制逻辑或专门的**总线控制器** 。
    

---

### 2. 总线的分类 (Classification) —— **⭐ 核心考点**

课件从三个维度对总线进行了分类，你需要重点掌握**按功能**和**按时序**的分类。

**维度一：按功能划分 (By Function)**

这就好比城市里的道路分级：

1. **CPU 内总线 (ALU 总线)**：CPU 芯片内部，连接寄存器和 ALU 的微型血管 。
    
2. **部件内总线 (局部/片级总线)**：主板上芯片与芯片之间连的线 。
    
3. **系统总线 (板级总线)**：**最常说的“总线”**。连接 CPU、主存、I/O 接口板的大动脉。通常包含 **地址线、数据线、控制线** 三部分 。
    
4. **外总线 (通信总线)**：计算机与外部系统（如打印机、另一台电脑）通信的线，如 USB 。
    

**维度二：按时序控制方式划分 (By Timing)**

这是决定总线传输效率的关键。

1. **同步总线 (Synchronous)**：
    
    - **特点**：有统一的时钟信号（大喇叭），大家听指挥行动。在固定的时钟周期内完成传送 。
        
    - _优缺_：速度快，逻辑简单；但必须迁就最慢的设备（木桶效应）。
        
2. **异步总线 (Asynchronous)**：
    
    - **特点**：没有统一时钟，靠**握手信号**（请求 Request - 应答 Acknowledge）。“你发了吗？”“我发了。”“那我收了。” 。
        
    - _优缺_：灵活，适应不同速度设备；但控制复杂，速度较慢。
        
3. **扩展同步总线 (Extended Synchronous)**：
    
    - **特点**：折中方案。以时钟为基础，但如果设备慢，可以插入“等待周期” 。
        

**⚠️ 易混淆概念辨析 (课件 P12)** ：
![[Pasted image 20251229195115.png]]
- **时钟周期**：CPU 做一步操作（微操作）的时间。
    
- **总线周期**：经过总线传一次数据的时间（通常包含几个时钟周期）。
    
- **工作周期**：指令执行的一个阶段（如取指 FT），包含多个总线周期。
    

#### **维度三：按数据格式划分**

- **并行总线**：多条线同时传（快，距离短）。
    
- **串行总线**：一条线挨个传（慢，距离长，抗干扰）。
    

---

### 3. 总线的仲裁 (Bus Arbitration) —— **⭐ 重难点**

因为总线是“共享”的，当 CPU 和 DMA 同时想用总线时，谁先用？这就需要**仲裁**。

#### **A. 集中式仲裁 (Centralized)**

有一个专门的“总线仲裁器”来做裁判。有三种具体方式：

1. **链式查询 (Daisy Chain)** ：
    
    - **原理**：授权信号 `BG` 像糖葫芦一样，从设备 1 传到设备 N。谁发了请求且先收到 `BG`，谁就获得总线。
        
    - **特点**：结构简单（线少），但**对电路故障敏感**（断了一个后面全完），且优先级固定（离仲裁器近的优先级高）。
        
2. **计数器定时查询** 
    
    - **原理**：仲裁器里有个计数器，数到几，就问几号设备“是你要用吗？”。
        
    - **特点**：**优先级灵活**（可以通过软件改变计数初值），但线稍微多一点。
        
3. **独立请求方式** ：
    
    - **原理**：每个设备都有专门的“请求线”和“授权线”连到仲裁器。
        
    - **特点**：**响应速度最快**，优先级控制最灵活，但**硬件最复杂**（线太多）。
        

#### **B.分布式仲裁 (Distributed)**

- 没有中央裁判，大家都有仲裁电路，通过互相监听总线上的请求号来决定谁用。
    

---

### 4. 总线标准 (Bus Standards)

为什么要是标准化？为了让不同厂家的卡都能插到你的主板上 。 标准规定了四个特性 ：

1. **物理特性**：插头形状、引脚数量。
    
2. **功能特性**：每一根线是干嘛的（地址？数据？）。
    
3. **电气特性**：电压是多少？高电平是 1 还是 0？
    
4. **时间特性**：信号什么时候有效（时序）。
    

**经典案例：PCI 总线**（课件 P23-27）

- **地位**：高性能系统总线。
    
- **特点**：同步总线，32/64 位，**地址和数据线复用**（省线），采用**独立请求式仲裁** 。
    

---

### 🎓 总结复习思路

复习这一节时，建议按以下逻辑串联：

1. **是什么？**（分时共享的传输线）
    
2. **有哪些？**（片内、系统、外总线）
    
3. **怎么传？**（同步看时钟，异步看握手）
    
4. **谁先传？**（链式最简单，独立请求最快）
    
5. **有什么规矩？**（PCI 标准）
    

这部分内容在考试中，**总线仲裁的三种方式对比**（优缺点、线数计算）以及**总线带宽的计算**（虽然这节课件没细讲计算公式，但属于相关考点）是常考内容。


# 接口类型与功能


主要讨论了 I/O 接口（I/O Interface）作为“中间人”的角色。

I/O 接口位于 **系统总线** 和 **外设** 之间 。它的存在是为了解决主机（高速、精密、标准）与外设（低速、多样、非标准）之间的各种不匹配问题。

我们可以从 **分类** 和 **功能** 两个维度来深入理解。

---

### 一、接口的分类 (Classification) —— “形形色色的翻译官”

根据不同的标准，接口可以被划分为不同的类型。

1. 按数据传送格式划分 (By Data Format)

这是最直观的分类，看数据是“排队走”还是“并排走”。

- **并行接口 (Parallel Interface)**
    
    - **特点**：接口与总线、接口与外设之间都采用 **并行传送**。数据各位（如 8 位、16 位）同时传送 。
        
    - **适用场景**：设备本身是并行工作的，且距离主机 **较近**（因为线多，长距离容易有干扰，且成本高）。
        
    - _典型代表_：老式打印机接口 (LPT)。
        
- **串行接口 (Serial Interface)**
    
    - **特点**：接口与系统总线是并行传送（CPU 内部总是并行的），但接口与外设之间是 **串行传送**（数据逐位分时传送）。
        
    - **适用场景**：设备本身是串行工作的，或者距离主机 **较远**，需要减少传输线数量的情况 。
        
    - _典型代表_：USB, SATA, 网口。
        

2. 按时序控制方式划分 (By Timing)

看接口怎么跟总线对暗号。

- **同步接口**：由统一的时序信号控制，步调一致 。
    
- **异步接口**：采用 **异步应答（握手）** 方式，不依赖统一时钟 。
    

3. 按 I/O 传送控制方式划分 (By Control Mode)

这是后续章节的重点，根据 CPU 干预程度不同划分：

- **直接程序传送接口**（最笨，CPU 死等）。
    
- **中断接口**（CPU 被动响应）。
    
- **DMA 接口**（直接存储器访问，CPU 不管）。
    

---

### 二、接口的主要功能 (Main Functions) —— “四大职能”

为什么不能把外设直接连到总线上？因为接口完成了以下四个不可或缺的“转换”工作：

#### 1. 寻址功能 (Addressing) —— “选人”

- **问题**：总线上挂了那么多设备，CPU 怎么找到特定的那一个？
    
- **功能**：接口接收 CPU 送来的地址码，判断是不是找自己的。如果是，就选择接口中的特定 **寄存器**（数据口、状态口、命令口）供 CPU 访问 。
    

#### 2. 数据缓冲 (Data Buffering) —— “调速”

- **问题**：CPU 极快，硬盘/键盘极慢。如果直接传，CPU 会被拖死。
    
- **功能**：接口里有 **数据缓冲寄存器 (DBR)**。
    
    - _输出时_：CPU 把数据“扔”进缓冲区就可以走了，接口慢慢发给外设。
        
    - _输入时_：外设把数据慢慢填满缓冲区，接口再通知 CPU 一次性取走。
        
    - 这就是 **速度匹配** 。
        

#### 3. 预处理 / 格式转换 (Preprocessing) —— “翻译”

- **问题**：CPU 说的是并行的 TTL 电平，网线传的是串行的差分信号，语言不通。
    
- **功能**：
    
    - **串-并转换**：把 CPU 的并行数据拆成串行发出去，或者反过来 。
        
    - **电平转换**：把微弱的逻辑电平转换为驱动外设的高功率电平 。
        
    - **位宽转换**：比如 32 位总线传给 8 位设备 。
        

#### 4. 控制功能 (Control) —— “传令”

- **问题**：CPU 怎么告诉打印机“开始打印”？打印机怎么告诉 CPU “没纸了”？
    
- **功能**：
    
    - 传送 **控制命令**（如启动、停止）。
        
    - 反馈 **状态信息**（如忙、就绪、错误）。
        

---

### 🧠 总结复习

这一节的图示结构通常是： `CPU <==> 系统总线 <==> [ 接口 (寄存器+控制逻辑) ] <==> 外设`

**核心考点**：

1. **串行接口** 并不是从头到尾都串行，它在 **“接口-总线”** 这一侧通常是 **并行** 的，只在 **“接口-外设”** 这一侧是 **串行** 的。
    
2. 接口的四大功能（寻址、缓冲、转换、控制）是简答题常客。