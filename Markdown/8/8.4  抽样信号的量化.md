
# 8.4.1 量化原理

### 1. 什么是量化？

**定义**：利用预先规定的有限个电平，把连续范围内的抽样值 $m_k$ 舍入到最接近的一个离散电平 $q_k$ 上。

![[Pasted image 20260104215801.png]]

- **通俗理解**：量化就是“四舍五入”。比如你测量身高是 1.7865...米，但在登记表上只能填 1.7米 或 1.8米，这个取整的过程就是量化。
    

### 2. 量化过程的三个要素

在量化器的输入输出特性图中（课件 P38），有三个关键点：

1. **量化间隔（步长）$\Delta$**：相邻两个量化电平之间的距离。
    
2. **量化电平 $q_i$**：允许输出的离散数值（台阶的高度）。
    
3. **判决门限 $x_i$**：决定输入值该往上走还是往下走的临界点（通常位于两个量化电平的正中间）。
    
![[Pasted image 20260104215746.png]]

### 3. 量化噪声 (Quantization Noise) —— 核心考点

由于量化是“舍入”，所以量化后的值 $m_q$ 与原始样值 $m$ 之间一定存在差值。

- **量化误差**：$e_q = m_q - m$。
    
- 量化噪声功率 $N_q$：
    
    在均匀量化且量化级数很大时，量化误差在 $[-\Delta/2, \Delta/2]$ 范围内呈均匀分布。经数学推导，其功率为：
    
    $$N_q = E[e_q^2] = \frac{\Delta^2}{12}$$
    
    > **结论**：量化间隔 $\Delta$ 越小（分的台阶越细），量化噪声就越小。

	![[Pasted image 20260104215839.png]]

### 4. 信号量化噪声比 (SQNR)

衡量量化质量好坏的指标是 **SQNR**（信号功率 / 量化噪声功率）。

- **规律**：每增加 1 bit 编码（即量化级数 $M$ 翻倍），SQNR 大约提高 **6dB**。
    
    - 例如：8 bit 量化的质量明显好于 4 bit 量化。
        

### 5. 量化的分类

根据量化间隔 $\Delta$ 是否固定，分为两类：

#### **(1) 均匀量化 (Uniform Quantization)**

- **特点**：所有的量化步长 $\Delta$ 都相等。
    
- **缺点**：**“大信号吃得香，小信号吃不饱”**。
    
    - 对于大信号，相对误差很小。
        
    - 对于小信号，由于 $\Delta$ 固定，相对误差会变得非常大，导致小信号的信噪比极低。
        

#### **(2) 非均匀量化 (Non-uniform Quantization)**

- **特点**：**小信号时步长小（分得细），大信号时步长大（分得粗）**。
    
- **优势**：极大地改善了小信号的量化信噪比，这也是现代电话通信（PCM）实际采用的方案。
    

---

### 📝 8.4.1 总结笔记

- **量化本质**：连续幅度 $\rightarrow$ 离散电平。
    
- **代价**：引入了不可逆的**量化噪声**。
    
- **核心公式**：$N_q = \Delta^2 / 12$。
    
- **工程选择**：为了兼顾大小信号，实际系统通常使用**非均匀量化**。


# 8.4.2 均匀量化

均匀量化是理解量化性能的基石。它的特点是把信号的取值范围均匀地切分成 $M$ 等份

---

### 1. 均匀量化的数学模型

假设输入信号的取值范围为 $[-a, a]$，将其等分为 $M$ 个区间，则每个量化区间的长度（量化步长）$\Delta v$ 为

$$\Delta v = \frac{2a}{M}$$

- **分层电平 $m_i$**：各个区间的边界点
    
- 输出电平 $q_i$：通常取在每个区间的中心点
    
    $$q_i = \frac{m_i + m_{i-1}}{2}$$

![[Pasted image 20260104220029.png]]

---

### 2. 量化噪声平均功率 ($N_q$) —— **重要推导结论**

当量化电平数 $M$ 足够大时，可以假设量化误差在 $[-\Delta v/2, \Delta v/2]$ 内呈均匀分布 5。经过积分推导，得到均匀量化的噪声功率为：


$$N_q = \frac{(\Delta v)^2}{12} = \frac{a^2}{3M^2}$$

- **结论**：量化噪声功率 $N_q$ 只与量化范围 $a$ 和量化级数 $M$ 有关。级数 $M$ 越多，噪声越小。
    
	![[Pasted image 20260104220117.png]]

### 3. 平均信号量噪比 ($S_0/N_q$) —— **必考公式**

为了衡量通信质量，我们计算信号功率 $S_0$ 与量化噪声功率 $N_q$ 的比值

$$\frac{S_0}{N_q} = 3 \cdot M^2 \cdot \frac{S_0}{a^2}$$

若设量化器的位数为 $N$（即 $M = 2^N$），将其转化为分贝 (dB) 形式

$$(\frac{S_0}{N_q})_{dB} \approx 6.02N + 4.77 + 10 \lg(\frac{S_0}{a^2})$$

#### **核心规律：6dB 法则**

从公式可以看出，**量化位数 $N$ 每增加 1 位，信号量噪比就提高约 6dB**

---

### 4. 均匀量化的缺点：小信号的噩梦

虽然均匀量化在数学上很简单，但它在处理语音信号时存在致命缺陷

- **大小信号不平等**：量化噪声 $N_q$ 是固定的（取决于 $\Delta v$）。
    
- **后果**：对于大信号，信噪比很高；但对于小信号（幅度远小于 $a$），信号功率 $S_0$ 很小，导致信噪比极低，声音会听不清楚
    

> 例题分析 (P46) 
> ![[Pasted image 20260104220150.png]]
> 若输入信号在 $[-a, a]$ 内均匀分布，则 $S_0 = a^2/3$
> 
> 此时信噪比简化为：$(\frac{S_0}{N_q})_{dB} = 10 \lg M^2 = 20N \lg 2 \approx 6.02N$ (dB)



### 📝 8.4.2 总结笔记

- **均匀量化**：步长 $\Delta v$ 恒定
    
- **关键公式**：$N_q = a^2 / (3M^2)$ 
    
- **6dB 法则**：位数加 1，质量加 6dB
    
- **痛点**：无法满足语音通信中对小信号质量的要求



# 8.4.3 非均匀量化

### 1. 为什么要进行非均匀量化？

均匀量化的步长是固定的。但在实际的语音通信中

- **信号特性**：语音信号的有效幅度通常只有最大量化范围的 **20%** 左右
    
- **动态范围大**：不同发话者、不同距离会导致信号幅度差异极大（40~50dB）
    
- **结果**：如果用均匀量化，小信号落入的量化级数太少，信噪比极低，导致声音模糊不清

![[Pasted image 20260104220329.png]]

**解决方案**：**“细分小信号，粗分大信号”**。让量化间隔随着信号幅度的增加而增大

---

### 2. 压扩技术 (Companding)

实现非均匀量化最实用的方法是在均匀量化器前加一个**压缩器**，在接收端加一个**扩张器** 

1. **压缩 (Compressing)**：在发送端，通过一个非线性电路，增大小信号的幅度，减小大信号的幅度
    
2. **量化**：对压缩后的信号进行**均匀量化**
    
3. **扩张 (Expanding)**：在接收端进行逆变换，恢复原始信号的比例

![[Pasted image 20260104220356.png]]

---

### 3. A 律 (A-Law) 与 $\mu$ 律 ($\mu$-Law)

国际电联 (ITU) 制定了两种对数压缩标准

- **A 律**：主要用于**我国大陆**、欧洲和国际间互联
    
    - 压缩参数典型值：**$A = 87.6$**
        
    - 在小信号时是线性的，大信号时是对数的
![[Pasted image 20260104220424.png]]

- **$\mu$ 律**：主要用于北美、日本等地区
    
    - 压缩参数典型值：**$\mu = 255$**（课件中写作 225，通常标准为 255）

![[Pasted image 20260104220437.png]]

---

### 4. A 律 13 折线法 —— **核心考点**

由于 A 律的数学公式包含对数，电路很难精确实现，工程上采用 **13 折线** 来近似 A 律特性曲线

**(1) 分段规则（归一化信号）**

- **X 轴（输入）**：非均匀划分为 8 段（每段是前一段的 2 倍长度，如 1/128, 1/64, 1/32...1）
    
- **Y 轴（输出）**：均匀划分为 8 段（每段长度均为 1/8）
    
- **负半轴**：由于语音是对称的，负半轴也有 8 段
    
- **为什么叫 13 折线？** 正负半轴的前两段（第 0 和第 1 段）斜率相同，连成了一条直线，所以总共是 $2 \times 8 - 3 = 13$ 段直线
    

**(2) 量化参数**

- **段内细分**：每段折线内部再进行 **16 等分** 均匀量化
    
- **总级数**：8 段 $\times$ 16 级 = 128 级。考虑正负双向，总共是 **256 个量化电平**
    
- **编码位数**：$256 = 2^8$，所以 PCM 编码是 **8 位**
    
![[Pasted image 20260104220559.png]]![[Pasted image 20260104220607.png]]

---

### 📝 8.4.3 总结笔记

- **非均匀量化目的**：提高小信号的量化信噪比
    
- **核心手段**：压扩技术（A 律 13 折线）
    
- **关键结论**：我国采用 A 律 13 折线，对应 **8 位编码**，能提供约 **38dB** 的信噪比